/**
* Javascript Templating Engine (Selector Styles) - A New Way To Deal With Templates 
* The MIT License - Copyright (c) 2013 Hongbo Yang <abcrun@gmail.com>
* Repository - https://github.com/abcrun/whiskers.git
* Version - 0.4.2
*/
!function(e,r){if(typeof define==="function"&&define.amd)define(r);else if(typeof module==="object"&&module.exports)module.exports=r();else this[e]=r()}("Whiskers",function(){var e="[\\x20\\t\\r\\n\\f]";var r="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+";var i="([a-zA-Z][\\w-]+)";var n="[\\w-\\[\\]\\.\\*]+";var f="\\{\\{=(\\$"+n+")\\}\\}";var a=new RegExp("\\$("+n+")","g");var s=new RegExp("^"+e+"*([a-zA-Z]+)"+e+"*");var u=new RegExp("^"+e+"*\\{\\{=(.+)\\}\\}"+e+"*");var t=new RegExp("#(?:"+i+"|"+f+")");var p=new RegExp("\\.(?:"+i+"|"+f+")");var h=new RegExp("\\["+e+"*"+i+e+"*="+e+"*(['\"]?)(?:("+r.replace("w","w\\.\"':\\/@;\\?&#()")+")\\2|"+f+")"+e+"*\\]");var l=new RegExp("(?:\\["+e+"*"+r+e+"*="+e+"*[^\\]]+|\\{\\{=[^\\}]+)$");var o=function(e){var r=e.length,i=0,n=[],f=[],a=[],s,t=[];for(var p=0;p<r;p++){var h=e.charAt(p);var c=false;if(/[\(\)>\+]/.test(h)||(c=p==r-1)){var x=n.join("");if(c)x+=h;if(l.test(x)){n.push(h)}else{if(h=="(")i++;if(h==")")i--;if(i){if(i==1&&h!="("||i!=1)n.push(h)}else{if(h==")"){f.push(o(x))}else if(h==">"||h=="+"||c){var w=true;if(h!=">"){var g=u.exec(x);if(g){w=false;x=g[1]}}if(!/^\s*$/.test(x)){s=v(x,w);f.push(s[0]);a.unshift(s[1])}if(h=="+"){t.push(f.join("")+a.join(""));f=[];a=[]}}n=[]}}}else{n.push(h)}}t.push(f.join("")+a.join(""));return t.join("")};var v=function(e,r){var i=[],n=[];if(r){var f,a=t.exec(e),u,l,o=[];var v=s.exec(e)[1];e.replace(/\*(\d+)/,function(e,r){if(r)f=r;return""});if(f)i.push(f+"*(");i.push("<"+v);if(a)i.push("id="+a[1]);while(e!=""){if(u=h.exec(e)){var c=u[1].toLowerCase(),x=u[3]||u[4];if(c=="class")o.push(x);else i.push(c+"="+x);e=e.replace(h,"")}else if(l=p.exec(e)){o.push(l[1]||l[2]);e=e.replace(p,"")}else{e=""}}if(o.length)i.push('class="'+o.join(" ")+'"');i.push(">");n.unshift("</"+v+">");if(f)n.push(")*"+f)}else{i.push(e);n.unshift("")}return[i.join(" "),n.join("")]};var c=function(e,r,i){var n,f=/(\d+)\*\(((?:\\\\.|[^\\\\])+)\)\*\1/g;if(r&&i)i(r);n=o(e);n=n.replace(f,function(e,r,i){var n=r,f=i,a=[];for(var s=0;s<n;s++){a.push(f.replace(/\*/g,s))}return a.join("")});if(r){n=n.replace(a,function(e,i){var n=i.match(/[^\[\]\.]+/g),f;if(n)while(n.length)f=(f||r)[n.shift()];return!/(?:undefined|null)/.test(f)?f:e})}return n};var x={render:c};return x});